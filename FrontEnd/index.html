<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ZenTej eKYC Verification</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="min-h-screen bg-gradient-to-br from-slate-900 to-gray-800 text-white flex justify-center items-center font-[Poppins]">

  <!-- LOGIN PAGE -->
  <div id="login-page" class="bg-gray-900 border border-gray-700 rounded-2xl p-8 w-96 text-center shadow-xl">
    <h1 class="text-3xl font-bold mb-6 text-blue-400">ZenTej eKYC Portal</h1>

    <input id="username" type="text" placeholder="Username"
      class="w-full p-3 mb-3 rounded-lg bg-gray-800 border border-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-blue-500" />

    <input id="password" type="password" placeholder="Password"
      class="w-full p-3 mb-6 rounded-lg bg-gray-800 border border-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-blue-500" />

    <button onclick="login()"
      class="w-full py-3 bg-blue-600 hover:bg-blue-700 rounded-lg text-lg font-semibold transition">Login</button>

    <p class="text-gray-400 mt-4">or sign in with Google</p>
    <button
      class="w-full py-3 mt-2 bg-green-600 hover:bg-green-700 rounded-lg font-semibold transition">Sign in with Google</button>
  </div>

  <!-- VERIFICATION PAGE -->
  <div id="verify-page" class="hidden bg-gray-900 border border-gray-700 rounded-2xl p-8 w-[550px] text-center shadow-xl">
    <h1 class="text-2xl font-semibold mb-6 text-green-400">Human Verification</h1>

    <div id="camera-section" class="flex flex-col items-center">
      <button id="start-camera-btn" onclick="startCamera()"
        class="w-full py-3 mb-4 bg-green-600 hover:bg-green-700 rounded-lg font-semibold transition">Start Camera</button>

      <video id="video" autoplay class="hidden rounded-xl shadow-lg mb-4 w-[500px] border border-gray-700"></video>
      <canvas id="canvas" width="480" height="360" class="hidden"></canvas>

      <button id="capture-btn" onclick="captureFrame()"
        class="hidden py-3 px-6 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold transition">Capture for Verification</button>
    </div>

    <div id="results" class="hidden bg-gray-800 mt-6 p-4 rounded-xl text-left shadow-inner">
      <h2 class="text-lg font-semibold mb-2 text-blue-400">Verification Results</h2>
      <p><span class="font-bold">Match Score:</span> <span id="match-score" class="text-blue-400"></span>%</p>
      <p><span class="font-bold">Liveness Score:</span> <span id="liveness-score" class="text-green-400"></span>%</p>
      <p><span class="font-bold">Authenticity:</span> <span id="authenticity" class="font-bold"></span></p>
    </div>
  </div>

  <script>
    const loginPage = document.getElementById('login-page');
    const verifyPage = document.getElementById('verify-page');
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');
    const resultsDiv = document.getElementById('results');
    const captureBtn = document.getElementById('capture-btn');
    const startCameraBtn = document.getElementById('start-camera-btn');
    let stream;

    // Login simulation
    function login() {
      const username = document.getElementById('username').value.trim();
      const password = document.getElementById('password').value.trim();
      if (!username || !password) {
        alert('Please enter both username and password.');
        return;
      }
      loginPage.classList.add('hidden');
      verifyPage.classList.remove('hidden');
    }

    // Camera access
    async function startCamera() {
      try {
        stream = await navigator.mediaDevices.getUserMedia({ video: true });
        video.srcObject = stream;
        video.classList.remove('hidden');
        startCameraBtn.classList.add('hidden');
        captureBtn.classList.remove('hidden');
      } catch (err) {
        alert('Camera access denied. Please enable permissions.');
        console.error(err);
      }
    }

    // Capture and simulate verification
    function captureFrame() {
      const ctx = canvas.getContext('2d');
      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
      const imageData = canvas.toDataURL('image/png');

      // Simulated AI verification result
      const matchScore = (Math.random() * 100).toFixed(2);
      const livenessScore = (Math.random() * 100).toFixed(2);
      const authenticity = Math.random() > 0.5 ? 'Genuine' : 'Spoof Detected';

      // Update UI
      document.getElementById('match-score').textContent = matchScore;
      document.getElementById('liveness-score').textContent = livenessScore;
      const authSpan = document.getElementById('authenticity');
      authSpan.textContent = authenticity;
      authSpan.classList.remove('text-green-500', 'text-red-500');
      authSpan.classList.add(authenticity === 'Genuine' ? 'text-green-500' : 'text-red-500');

      resultsDiv.classList.remove('hidden');
    }
  </script>
</body>
</html>
